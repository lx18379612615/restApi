2023-01-08 19:03:40,395 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:03:40,395 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:04:00,060 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:04:00,060 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:04:00,063 - cluster - INFO - predict start
2023-01-08 19:04:00,064 - cluster - INFO - request params: <bottle.FormsDict object at 0x14e2963d0>
2023-01-08 19:04:00,064 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:04:00,073 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:04:00,402 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:04:00,402 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:04:00,422 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:04:00,422 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:04:00,422 - cluster - INFO - clean data set ...
2023-01-08 19:04:00,550 - restApi - INFO - text_df: 
2023-01-08 19:04:00,550 - restApi - INFO - text_df: 
2023-01-08 19:04:00,550 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:04:00,550 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:04:00,573 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:04:00,573 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:04:00,584 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:04:00,584 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:04:00,592 - cluster - INFO - train data set ...
2023-01-08 19:04:00,594 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:04:00,816 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:06:42,300 - restApi - INFO - app stoped.
2023-01-08 19:06:42,300 - restApi - INFO - app stoped.
2023-01-08 19:06:43,728 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:06:43,728 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:07:10,871 - restApi - INFO - app stoped.
2023-01-08 19:07:10,871 - restApi - INFO - app stoped.
2023-01-08 19:07:12,426 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:07:12,426 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:08:51,136 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:08:51,136 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:08:51,139 - cluster - INFO - predict start
2023-01-08 19:08:51,144 - cluster - INFO - request params: <bottle.FormsDict object at 0x28caf9670>
2023-01-08 19:08:51,144 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:08:51,170 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:08:51,479 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:08:51,479 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:08:51,501 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:08:51,501 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:08:51,501 - cluster - INFO - clean data set ...
2023-01-08 19:08:51,670 - restApi - INFO - text_df: 
2023-01-08 19:08:51,670 - restApi - INFO - text_df: 
2023-01-08 19:08:51,670 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:08:51,670 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:08:51,698 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:08:51,698 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:08:51,720 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:08:51,720 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:08:51,734 - cluster - INFO - train data set ...
2023-01-08 19:08:51,737 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:08:51,982 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:09:42,720 - restApi - INFO - app stoped.
2023-01-08 19:09:42,720 - restApi - INFO - app stoped.
2023-01-08 19:10:09,620 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:10:09,620 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:10:32,683 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:10:32,683 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:11:01,095 - restApi - INFO - app stoped.
2023-01-08 19:11:01,095 - restApi - INFO - app stoped.
2023-01-08 19:19:36,278 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:19:36,278 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:19:43,185 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:19:43,185 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:19:52,755 - cluster - INFO - predict start
2023-01-08 19:19:52,755 - cluster - INFO - request params: <bottle.FormsDict object at 0x16bd85940>
2023-01-08 19:19:58,373 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:19:58,383 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:19:58,774 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:19:58,774 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:19:58,784 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:19:58,785 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:19:58,785 - cluster - INFO - clean data set ...
2023-01-08 19:19:58,935 - restApi - INFO - text_df: 
2023-01-08 19:19:58,935 - restApi - INFO - text_df: 
2023-01-08 19:19:58,935 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:19:58,935 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:19:58,952 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:19:58,952 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:19:58,972 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:19:58,972 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:19:58,987 - cluster - INFO - train data set ...
2023-01-08 19:19:58,991 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:19:59,224 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:20:07,050 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:20:07,050 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:20:07,052 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:20:07,052 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:21:41,036 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:21:41,036 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:21:45,847 - cluster - INFO - predict start
2023-01-08 19:21:45,847 - cluster - INFO - request params: <bottle.FormsDict object at 0x104ca98e0>
2023-01-08 19:21:45,847 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:21:45,857 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:21:46,167 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:21:46,167 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:21:46,175 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:21:46,175 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:21:46,175 - cluster - INFO - clean data set ...
2023-01-08 19:21:46,345 - restApi - INFO - text_df: 
2023-01-08 19:21:46,345 - restApi - INFO - text_df: 
2023-01-08 19:21:46,345 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:21:46,345 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:25:10,812 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:25:10,812 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:27:14,686 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:27:14,686 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:27:14,701 - cluster - INFO - train data set ...
2023-01-08 19:27:14,705 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:27:14,966 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:27:17,737 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:27:17,737 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:27:17,738 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:27:17,738 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:27:27,975 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:27:27,975 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:27:27,978 - cluster - INFO - predict start
2023-01-08 19:27:27,979 - cluster - INFO - request params: <bottle.FormsDict object at 0x16bf90940>
2023-01-08 19:27:27,979 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:27:28,004 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:27:28,322 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:27:28,322 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:27:28,346 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:27:28,346 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:27:28,346 - cluster - INFO - clean data set ...
2023-01-08 19:27:28,528 - restApi - INFO - text_df: 
2023-01-08 19:27:28,528 - restApi - INFO - text_df: 
2023-01-08 19:27:28,529 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:27:28,529 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:27:37,317 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:27:37,317 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:28:03,365 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:28:03,365 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:28:03,380 - cluster - INFO - train data set ...
2023-01-08 19:28:03,384 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:28:03,644 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:28:03,647 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:28:03,647 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:28:03,648 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:28:03,648 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:28:26,518 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:28:26,518 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:28:26,523 - cluster - INFO - predict start
2023-01-08 19:28:26,524 - cluster - INFO - request params: <bottle.FormsDict object at 0x16be74370>
2023-01-08 19:28:26,524 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:28:26,552 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:28:26,843 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:28:26,844 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:28:26,868 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:28:26,868 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:28:26,868 - cluster - INFO - clean data set ...
2023-01-08 19:28:27,032 - restApi - INFO - text_df: 
2023-01-08 19:28:27,032 - restApi - INFO - text_df: 
2023-01-08 19:28:27,033 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:28:27,033 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:28:27,062 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:28:27,062 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:29:02,373 - restApi - INFO - app stoped.
2023-01-08 19:29:02,373 - restApi - INFO - app stoped.
2023-01-08 19:29:03,873 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:29:03,873 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:29:09,960 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:29:09,960 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:29:09,962 - cluster - INFO - predict start
2023-01-08 19:29:09,965 - cluster - INFO - request params: <bottle.FormsDict object at 0x16c469850>
2023-01-08 19:29:09,965 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:29:09,986 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:29:10,798 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:29:10,798 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:29:10,825 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:29:10,825 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:29:10,825 - cluster - INFO - clean data set ...
2023-01-08 19:29:16,560 - restApi - INFO - text_df: 
2023-01-08 19:29:16,560 - restApi - INFO - text_df: 
2023-01-08 19:29:16,560 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:29:16,560 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:29:16,592 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:29:16,592 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:29:16,612 - restApi - INFO - 这是在干嘛1
2023-01-08 19:29:16,612 - restApi - INFO - 这是在干嘛1
2023-01-08 19:29:46,004 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:29:46,004 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:29:46,019 - cluster - INFO - train data set ...
2023-01-08 19:29:46,022 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:29:46,288 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:29:46,301 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:29:46,301 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:29:46,304 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:29:46,304 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:29:58,678 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:29:58,678 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:29:58,681 - cluster - INFO - predict start
2023-01-08 19:29:58,682 - cluster - INFO - request params: <bottle.FormsDict object at 0x17ff51ee0>
2023-01-08 19:29:58,682 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:29:58,719 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:30:18,726 - restApi - ERROR - TransportError(N/A, 'Unable to sniff hosts.')
2023-01-08 19:30:18,726 - restApi - ERROR - TransportError(N/A, 'Unable to sniff hosts.')
2023-01-08 19:30:18,730 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 37, in predict
    full_data = connect_es_scroll(body)
  File "/Users/lengxu/Documents/python/restApi/connect_unit.py", line 92, in connect_es_scroll
    res = scroll_es_data(body, None)
  File "/Users/lengxu/Documents/python/restApi/connect_unit.py", line 109, in scroll_es_data
    es = get_es_connect()
  File "/Users/lengxu/Documents/python/restApi/connect_unit.py", line 137, in get_es_connect
    es = Elasticsearch(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/elasticsearch/client/__init__.py", line 207, in __init__
    self.transport = transport_class(_normalize_hosts(hosts), **kwargs)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/elasticsearch/transport.py", line 185, in __init__
    self.sniff_hosts(True)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/elasticsearch/transport.py", line 327, in sniff_hosts
    node_info = self._get_sniff_data(initial)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/elasticsearch/transport.py", line 288, in _get_sniff_data
    raise TransportError("N/A", "Unable to sniff hosts.")
elasticsearch.exceptions.TransportError: TransportError(N/A, 'Unable to sniff hosts.')

2023-01-08 19:30:18,730 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 37, in predict
    full_data = connect_es_scroll(body)
  File "/Users/lengxu/Documents/python/restApi/connect_unit.py", line 92, in connect_es_scroll
    res = scroll_es_data(body, None)
  File "/Users/lengxu/Documents/python/restApi/connect_unit.py", line 109, in scroll_es_data
    es = get_es_connect()
  File "/Users/lengxu/Documents/python/restApi/connect_unit.py", line 137, in get_es_connect
    es = Elasticsearch(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/elasticsearch/client/__init__.py", line 207, in __init__
    self.transport = transport_class(_normalize_hosts(hosts), **kwargs)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/elasticsearch/transport.py", line 185, in __init__
    self.sniff_hosts(True)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/elasticsearch/transport.py", line 327, in sniff_hosts
    node_info = self._get_sniff_data(initial)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/elasticsearch/transport.py", line 288, in _get_sniff_data
    raise TransportError("N/A", "Unable to sniff hosts.")
elasticsearch.exceptions.TransportError: TransportError(N/A, 'Unable to sniff hosts.')

2023-01-08 19:30:34,985 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:30:34,985 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:30:34,990 - cluster - INFO - predict start
2023-01-08 19:30:34,991 - cluster - INFO - request params: <bottle.FormsDict object at 0x17eefb1c0>
2023-01-08 19:30:34,992 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:30:35,022 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:30:35,366 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:30:35,366 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:30:35,375 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:30:35,375 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:30:35,375 - cluster - INFO - clean data set ...
2023-01-08 19:30:35,556 - restApi - INFO - text_df: 
2023-01-08 19:30:35,556 - restApi - INFO - text_df: 
2023-01-08 19:30:35,556 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:30:35,556 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:30:35,572 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:30:35,572 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:30:35,593 - restApi - INFO - 这是在干嘛1
2023-01-08 19:30:35,593 - restApi - INFO - 这是在干嘛1
2023-01-08 19:30:52,962 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:30:52,962 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:30:52,977 - cluster - INFO - train data set ...
2023-01-08 19:30:52,980 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:30:53,224 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:31:01,591 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:31:01,591 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:31:01,591 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:31:01,591 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:31:13,461 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:31:13,461 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:31:13,463 - cluster - INFO - predict start
2023-01-08 19:31:13,463 - cluster - INFO - request params: <bottle.FormsDict object at 0x17ff51be0>
2023-01-08 19:31:13,463 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:31:13,473 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:31:13,768 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:31:13,769 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:31:13,777 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:31:13,777 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:31:13,777 - cluster - INFO - clean data set ...
2023-01-08 19:31:13,938 - restApi - INFO - text_df: 
2023-01-08 19:31:13,938 - restApi - INFO - text_df: 
2023-01-08 19:31:13,938 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:31:13,938 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:31:13,956 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:31:13,956 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:31:13,974 - restApi - INFO - 这是在干嘛1
2023-01-08 19:31:13,974 - restApi - INFO - 这是在干嘛1
2023-01-08 19:31:13,977 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:31:13,977 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:31:13,991 - cluster - INFO - train data set ...
2023-01-08 19:31:13,994 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:31:14,309 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:31:14,312 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:31:14,312 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:31:14,312 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:31:14,312 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:33:57,630 - restApi - INFO - app stoped.
2023-01-08 19:33:57,630 - restApi - INFO - app stoped.
2023-01-08 19:34:04,785 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:34:04,785 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:34:18,735 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:34:18,735 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:34:18,736 - cluster - INFO - predict start
2023-01-08 19:34:18,738 - cluster - INFO - request params: <bottle.FormsDict object at 0x15f5d31c0>
2023-01-08 19:34:18,739 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:34:18,761 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:34:19,042 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:34:19,043 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:34:19,066 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:34:19,066 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:34:19,066 - cluster - INFO - clean data set ...
2023-01-08 19:34:19,248 - restApi - INFO - text_df: 
2023-01-08 19:34:19,248 - restApi - INFO - text_df: 
2023-01-08 19:34:19,248 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:34:19,248 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:34:19,282 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:34:19,282 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:34:19,303 - restApi - INFO - 这是在干嘛12
2023-01-08 19:34:19,303 - restApi - INFO - 这是在干嘛12
2023-01-08 19:34:19,306 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:34:19,306 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:34:19,321 - cluster - INFO - train data set ...
2023-01-08 19:34:19,325 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:34:19,588 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:34:19,601 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:34:19,601 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:34:19,604 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:34:19,604 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:35:00,166 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:35:00,166 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:35:00,167 - cluster - INFO - predict start
2023-01-08 19:35:00,168 - cluster - INFO - request params: <bottle.FormsDict object at 0x15f5d3460>
2023-01-08 19:35:00,168 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:35:00,178 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:35:00,529 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:35:00,529 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:35:00,537 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:35:00,537 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:35:00,537 - cluster - INFO - clean data set ...
2023-01-08 19:35:00,688 - restApi - INFO - text_df: 
2023-01-08 19:35:00,688 - restApi - INFO - text_df: 
2023-01-08 19:35:00,689 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:35:00,689 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:35:00,715 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:35:00,715 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:35:00,734 - restApi - INFO - 这是在干嘛12
2023-01-08 19:35:00,734 - restApi - INFO - 这是在干嘛12
2023-01-08 19:35:00,737 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:35:00,737 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:35:00,751 - cluster - INFO - train data set ...
2023-01-08 19:35:00,755 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:35:01,008 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:35:01,011 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:35:01,011 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:35:01,012 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:35:01,012 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:36:56,262 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:36:56,262 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:36:56,265 - cluster - INFO - predict start
2023-01-08 19:36:56,266 - cluster - INFO - request params: <bottle.FormsDict object at 0x15f634070>
2023-01-08 19:36:56,267 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:36:56,302 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:36:56,623 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:36:56,623 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:36:56,631 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:36:56,631 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:36:56,631 - cluster - INFO - clean data set ...
2023-01-08 19:36:56,840 - restApi - INFO - text_df: 
2023-01-08 19:36:56,840 - restApi - INFO - text_df: 
2023-01-08 19:36:56,840 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:36:56,840 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:36:56,856 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:36:56,856 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:36:56,876 - restApi - INFO - 这是在干嘛12
2023-01-08 19:36:56,876 - restApi - INFO - 这是在干嘛12
2023-01-08 19:36:56,879 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:36:56,879 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:36:56,893 - cluster - INFO - train data set ...
2023-01-08 19:36:56,897 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:36:57,190 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:36:57,193 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:36:57,193 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:36:57,194 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:36:57,194 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:37:20,812 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:37:20,812 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:37:20,814 - cluster - INFO - predict start
2023-01-08 19:37:20,815 - cluster - INFO - request params: <bottle.FormsDict object at 0x15f634190>
2023-01-08 19:37:20,816 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:37:20,833 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:37:21,124 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:37:21,124 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:37:21,149 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:37:21,149 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:37:21,149 - cluster - INFO - clean data set ...
2023-01-08 19:37:21,294 - restApi - INFO - text_df: 
2023-01-08 19:37:21,294 - restApi - INFO - text_df: 
2023-01-08 19:37:21,295 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:37:21,295 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:37:21,324 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:37:21,324 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:37:21,342 - restApi - INFO - 这是在干嘛12
2023-01-08 19:37:21,342 - restApi - INFO - 这是在干嘛12
2023-01-08 19:37:21,345 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:37:21,345 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:37:21,358 - cluster - INFO - train data set ...
2023-01-08 19:37:21,361 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:37:21,658 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:37:21,661 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:37:21,661 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:37:21,662 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:37:21,662 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:38:27,837 - restApi - INFO - app stoped.
2023-01-08 19:38:27,837 - restApi - INFO - app stoped.
2023-01-08 19:40:07,349 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:40:07,349 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:41:55,725 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:41:55,725 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:44:27,175 - restApi - INFO - app stoped.
2023-01-08 19:44:27,175 - restApi - INFO - app stoped.
2023-01-08 19:44:28,607 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:44:28,607 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:44:36,821 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:44:36,821 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:44:42,716 - cluster - INFO - predict start
2023-01-08 19:44:42,717 - cluster - INFO - request params: <bottle.FormsDict object at 0x177308fa0>
2023-01-08 19:44:42,717 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:44:42,727 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:45:08,502 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:45:08,503 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:45:08,514 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:45:08,514 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:45:08,514 - cluster - INFO - clean data set ...
2023-01-08 19:45:10,792 - restApi - INFO - text_df: 
2023-01-08 19:45:10,792 - restApi - INFO - text_df: 
2023-01-08 19:45:10,793 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:45:10,793 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:45:10,811 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:45:10,811 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:45:10,830 - restApi - INFO - 这是在干嘛1235
2023-01-08 19:45:10,830 - restApi - INFO - 这是在干嘛1235
2023-01-08 19:45:10,833 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:45:10,833 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:45:10,847 - cluster - INFO - train data set ...
2023-01-08 19:45:10,850 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:45:11,098 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:45:11,111 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:45:11,111 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:45:11,114 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:45:11,114 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:45:36,406 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:45:36,406 - restApi - INFO - calling cluster.predict() ...
2023-01-08 19:45:42,887 - cluster - INFO - predict start
2023-01-08 19:45:42,888 - cluster - INFO - request params: <bottle.FormsDict object at 0x1046b26d0>
2023-01-08 19:45:42,888 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:45:42,898 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:45:43,191 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:45:43,192 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:45:43,202 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:45:43,203 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:45:43,203 - cluster - INFO - clean data set ...
2023-01-08 19:45:43,342 - restApi - INFO - text_df: 
2023-01-08 19:45:43,342 - restApi - INFO - text_df: 
2023-01-08 19:45:43,342 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:45:43,342 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:45:43,357 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:45:43,357 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:45:43,378 - restApi - INFO - 这是在干嘛1235
2023-01-08 19:45:43,378 - restApi - INFO - 这是在干嘛1235
2023-01-08 19:46:11,118 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:46:11,118 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:46:42,777 - cluster - INFO - train data set ...
2023-01-08 19:47:32,580 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:54:58,535 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:54:58,538 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:54:58,538 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:54:58,539 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:54:58,539 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:54:59,356 - restApi - INFO - app stoped.
2023-01-08 19:54:59,356 - restApi - INFO - app stoped.
2023-01-08 19:55:00,873 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:55:00,873 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:55:10,408 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 19:55:10,408 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 19:55:15,024 - cluster - INFO - predict start
2023-01-08 19:55:15,025 - cluster - INFO - request params: <bottle.FormsDict object at 0x28c9f6610>
2023-01-08 19:55:15,025 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:55:15,037 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:55:15,331 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:55:15,331 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:55:15,340 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:55:15,340 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:55:15,340 - cluster - INFO - clean data set ...
2023-01-08 19:55:15,509 - restApi - INFO - text_df: 
2023-01-08 19:55:15,509 - restApi - INFO - text_df: 
2023-01-08 19:55:15,509 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:55:15,509 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:55:15,527 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:55:15,527 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:55:15,546 - restApi - INFO - 这是在干嘛1235
2023-01-08 19:55:15,546 - restApi - INFO - 这是在干嘛1235
2023-01-08 19:55:21,033 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:55:21,033 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:55:21,048 - cluster - INFO - train data set ...
2023-01-08 19:55:21,052 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:55:49,059 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:55:49,071 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:55:49,071 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:55:49,072 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:55:49,072 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:56:11,629 - restApi - INFO - app stoped.
2023-01-08 19:56:11,629 - restApi - INFO - app stoped.
2023-01-08 19:56:13,104 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:56:13,104 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 19:56:19,803 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 19:56:19,803 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 19:56:19,806 - cluster - INFO - predict start
2023-01-08 19:56:19,807 - cluster - INFO - request params: <bottle.FormsDict object at 0x1083f34c0>
2023-01-08 19:56:19,807 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 19:56:19,817 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 19:56:20,134 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 19:56:20,134 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:56:20,159 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 19:56:20,159 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 19:56:20,159 - cluster - INFO - clean data set ...
2023-01-08 19:56:20,309 - restApi - INFO - text_df: 
2023-01-08 19:56:20,309 - restApi - INFO - text_df: 
2023-01-08 19:56:20,309 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:56:20,309 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 19:56:20,338 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:56:20,338 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 19:56:20,358 - restApi - INFO - 这是在干嘛1235
2023-01-08 19:56:20,358 - restApi - INFO - 这是在干嘛1235
2023-01-08 19:56:20,360 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:56:20,360 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:56:20,375 - cluster - INFO - train data set ...
2023-01-08 19:56:20,380 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 19:59:55,506 - cluster - INFO - train ok, predict itself ...
2023-01-08 19:59:55,519 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:59:55,519 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 19:59:55,520 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 19:59:55,520 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:00:13,432 - restApi - INFO - app stoped.
2023-01-08 20:00:13,432 - restApi - INFO - app stoped.
2023-01-08 20:00:14,927 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:00:14,927 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:00:25,637 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:00:25,637 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:00:25,656 - cluster - INFO - predict start
2023-01-08 20:00:25,657 - cluster - INFO - request params: <bottle.FormsDict object at 0x13ca2e520>
2023-01-08 20:00:25,657 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 20:00:25,667 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 20:00:51,755 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 20:00:51,755 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:00:51,766 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 20:00:51,767 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 20:00:51,767 - cluster - INFO - clean data set ...
2023-01-08 20:00:51,991 - restApi - INFO - text_df: 
2023-01-08 20:00:51,991 - restApi - INFO - text_df: 
2023-01-08 20:00:51,991 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:00:51,991 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:00:52,008 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:00:52,008 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:00:52,027 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:00:52,027 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:00:52,029 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:00:52,029 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:00:52,043 - cluster - INFO - train data set ...
2023-01-08 20:00:52,047 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:00:52,047 - cluster - INFO - k: 2
2023-01-08 20:00:52,068 - cluster - INFO - k: 3
2023-01-08 20:00:52,086 - cluster - INFO - k: 4
2023-01-08 20:00:52,109 - cluster - INFO - k: 5
2023-01-08 20:00:52,132 - cluster - INFO - k: 6
2023-01-08 20:00:52,156 - cluster - INFO - k: 7
2023-01-08 20:00:52,179 - cluster - INFO - k: 8
2023-01-08 20:00:52,203 - cluster - INFO - k: 9
2023-01-08 20:00:52,230 - cluster - INFO - k: 10
2023-01-08 20:00:52,258 - cluster - INFO - k: 11
2023-01-08 20:00:52,294 - cluster - INFO - train ok, predict itself ...
2023-01-08 20:00:52,307 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:00:52,307 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:00:52,308 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:00:52,308 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:01:45,832 - restApi - INFO - app stoped.
2023-01-08 20:01:45,832 - restApi - INFO - app stoped.
2023-01-08 20:01:47,289 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:01:47,289 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:01:53,590 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:01:53,590 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:01:53,594 - cluster - INFO - predict start
2023-01-08 20:01:53,597 - cluster - INFO - request params: <bottle.FormsDict object at 0x157400460>
2023-01-08 20:01:53,597 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 20:01:53,617 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 20:01:53,993 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 20:01:53,993 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:01:54,015 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 20:01:54,015 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 20:01:54,016 - cluster - INFO - clean data set ...
2023-01-08 20:01:54,188 - restApi - INFO - text_df: 
2023-01-08 20:01:54,188 - restApi - INFO - text_df: 
2023-01-08 20:01:54,189 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:01:54,189 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:01:54,230 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:01:54,230 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:01:54,250 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:01:54,250 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:01:54,253 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:01:54,253 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:01:54,268 - cluster - INFO - train data set ...
2023-01-08 20:01:54,272 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:01:54,272 - cluster - INFO - k: 2
2023-01-08 20:01:54,294 - cluster - INFO - k: 3
2023-01-08 20:01:54,319 - cluster - INFO - k: 4
2023-01-08 20:01:54,337 - cluster - INFO - k: 5
2023-01-08 20:01:54,363 - cluster - INFO - k: 6
2023-01-08 20:01:54,386 - cluster - INFO - k: 7
2023-01-08 20:01:54,411 - cluster - INFO - k: 8
2023-01-08 20:01:54,438 - cluster - INFO - k: 9
2023-01-08 20:01:54,469 - cluster - INFO - train ok, predict itself ...
2023-01-08 20:01:54,482 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:01:54,482 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:01:54,483 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:01:54,483 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:03:58,548 - restApi - INFO - app stoped.
2023-01-08 20:03:58,548 - restApi - INFO - app stoped.
2023-01-08 20:04:00,026 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:04:00,026 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:04:05,740 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:04:05,740 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:04:05,743 - cluster - INFO - predict start
2023-01-08 20:04:05,745 - cluster - INFO - request params: <bottle.FormsDict object at 0x16dab18e0>
2023-01-08 20:04:05,746 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 20:04:05,764 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 20:04:06,119 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 20:04:06,119 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:04:06,147 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 20:04:06,147 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 20:04:06,147 - cluster - INFO - clean data set ...
2023-01-08 20:04:06,288 - restApi - INFO - text_df: 
2023-01-08 20:04:06,288 - restApi - INFO - text_df: 
2023-01-08 20:04:06,288 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:04:06,288 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:04:06,315 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:04:06,315 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:04:06,333 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:04:06,333 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:04:06,336 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:04:06,336 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:04:06,349 - cluster - INFO - train data set ...
2023-01-08 20:04:06,354 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:04:29,165 - cluster - INFO - k: 2
2023-01-08 20:04:30,933 - cluster - INFO - k: 3
2023-01-08 20:04:32,185 - cluster - INFO - k: 4
2023-01-08 20:06:41,112 - cluster - INFO - train ok, predict itself ...
2023-01-08 20:06:41,125 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:06:41,125 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:06:41,126 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:06:41,126 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:06:56,506 - restApi - INFO - app stoped.
2023-01-08 20:06:56,506 - restApi - INFO - app stoped.
2023-01-08 20:06:57,966 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:06:57,966 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:07:22,585 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:07:22,585 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:07:22,588 - cluster - INFO - predict start
2023-01-08 20:07:22,590 - cluster - INFO - request params: <bottle.FormsDict object at 0x15faec940>
2023-01-08 20:07:22,591 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 20:07:22,614 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 20:07:22,936 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 20:07:22,937 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:07:22,963 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 20:07:22,964 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 20:07:22,964 - cluster - INFO - clean data set ...
2023-01-08 20:07:23,154 - restApi - INFO - text_df: 
2023-01-08 20:07:23,154 - restApi - INFO - text_df: 
2023-01-08 20:07:23,154 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:07:23,154 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:07:23,171 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:07:23,171 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:07:23,191 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:07:23,191 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:07:23,193 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:07:23,193 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:07:23,208 - cluster - INFO - train data set ...
2023-01-08 20:07:23,211 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:09:57,076 - cluster - INFO - k: 2
2023-01-08 20:09:57,096 - cluster - INFO - k: 3
2023-01-08 20:09:57,113 - cluster - INFO - k: 4
2023-01-08 20:10:36,555 - cluster - INFO - train ok, predict itself ...
2023-01-08 20:10:51,515 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:10:51,515 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:10:51,516 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:10:51,516 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:11:36,975 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:11:36,975 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:11:36,980 - cluster - INFO - predict start
2023-01-08 20:11:36,981 - cluster - INFO - request params: <bottle.FormsDict object at 0x15fb995e0>
2023-01-08 20:11:36,981 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 20:11:37,004 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 20:11:37,331 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 20:11:37,331 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:11:37,361 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 20:11:37,361 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 20:11:37,361 - cluster - INFO - clean data set ...
2023-01-08 20:11:37,543 - restApi - INFO - text_df: 
2023-01-08 20:11:37,543 - restApi - INFO - text_df: 
2023-01-08 20:11:37,544 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:11:37,544 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:11:37,570 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:11:37,570 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:11:37,590 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:11:37,590 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:11:37,593 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:11:37,593 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:11:37,607 - cluster - INFO - train data set ...
2023-01-08 20:11:37,610 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:11:37,610 - cluster - INFO - k: 2
2023-01-08 20:11:37,634 - cluster - INFO - k: 3
2023-01-08 20:11:37,654 - cluster - INFO - k: 4
2023-01-08 20:12:10,939 - cluster - INFO - train ok, predict itself ...
2023-01-08 20:12:10,943 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:12:10,943 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:12:10,943 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:12:10,943 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:12:54,993 - restApi - INFO - app stoped.
2023-01-08 20:12:54,993 - restApi - INFO - app stoped.
2023-01-08 20:12:56,467 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:12:56,467 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-08 20:13:01,999 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:13:01,999 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:13:02,000 - cluster - INFO - predict start
2023-01-08 20:13:02,006 - cluster - INFO - request params: <bottle.FormsDict object at 0x28eb41520>
2023-01-08 20:13:02,006 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 20:13:02,029 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 20:13:02,336 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 20:13:02,336 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:13:02,372 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 20:13:02,372 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 20:13:02,372 - cluster - INFO - clean data set ...
2023-01-08 20:13:02,539 - restApi - INFO - text_df: 
2023-01-08 20:13:02,539 - restApi - INFO - text_df: 
2023-01-08 20:13:02,540 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:13:02,540 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:13:02,569 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:13:02,569 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:13:02,589 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:13:02,589 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:13:02,592 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:13:02,592 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:13:02,606 - cluster - INFO - train data set ...
2023-01-08 20:13:02,609 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:13:02,609 - cluster - INFO - k: 2
2023-01-08 20:13:02,623 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:13:02,623 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:13:02,624 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:13:02,624 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:13:14,178 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:13:14,178 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:13:14,183 - cluster - INFO - predict start
2023-01-08 20:13:14,183 - cluster - INFO - request params: <bottle.FormsDict object at 0x28eb413d0>
2023-01-08 20:13:14,183 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 20:13:14,193 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 20:13:14,497 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 20:13:14,497 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:13:14,521 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 20:13:14,521 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 20:13:14,521 - cluster - INFO - clean data set ...
2023-01-08 20:13:14,677 - restApi - INFO - text_df: 
2023-01-08 20:13:14,677 - restApi - INFO - text_df: 
2023-01-08 20:13:14,678 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:13:14,678 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:13:14,710 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:13:14,710 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:13:14,729 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:13:14,729 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:13:14,732 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:13:14,732 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:13:14,746 - cluster - INFO - train data set ...
2023-01-08 20:13:14,749 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:13:14,749 - cluster - INFO - k: 2
2023-01-08 20:13:14,753 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:13:14,753 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:13:14,753 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:13:14,753 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:14:15,006 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:14:15,006 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:14:15,009 - cluster - INFO - predict start
2023-01-08 20:14:15,010 - cluster - INFO - request params: <bottle.FormsDict object at 0x28fbf2af0>
2023-01-08 20:14:15,011 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 20:14:15,035 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 20:14:15,319 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 20:14:15,320 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:14:15,346 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 20:14:15,346 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 20:14:15,346 - cluster - INFO - clean data set ...
2023-01-08 20:14:15,493 - restApi - INFO - text_df: 
2023-01-08 20:14:15,493 - restApi - INFO - text_df: 
2023-01-08 20:14:15,494 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:14:15,494 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:14:15,525 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:14:15,525 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:14:15,544 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:14:15,544 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:14:15,547 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:14:15,547 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:14:15,561 - cluster - INFO - train data set ...
2023-01-08 20:14:15,565 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:14:15,565 - cluster - INFO - k: 2
2023-01-08 20:14:37,541 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:14:37,541 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:14:37,541 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:14:37,541 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:14:47,423 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:14:47,423 - restApi - INFO - calling cluster.predict()111 ...
2023-01-08 20:14:47,426 - cluster - INFO - predict start
2023-01-08 20:14:47,427 - cluster - INFO - request params: <bottle.FormsDict object at 0x28fd34f10>
2023-01-08 20:14:47,428 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-08 20:14:47,452 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-08 20:14:47,800 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-08 20:14:47,800 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:14:47,809 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-08 20:14:47,809 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-08 20:14:47,809 - cluster - INFO - clean data set ...
2023-01-08 20:14:47,968 - restApi - INFO - text_df: 
2023-01-08 20:14:47,968 - restApi - INFO - text_df: 
2023-01-08 20:14:47,968 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:14:47,968 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-08 20:14:47,996 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:14:47,996 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-08 20:14:48,016 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:14:48,016 - restApi - INFO - 这是在干嘛1235
2023-01-08 20:14:48,019 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:14:48,019 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:14:48,032 - cluster - INFO - train data set ...
2023-01-08 20:14:48,036 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-08 20:14:48,036 - cluster - INFO - k: 2
2023-01-08 20:17:54,896 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:17:54,896 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-08 20:17:54,896 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:17:54,896 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-08 20:23:30,010 - restApi - INFO - app stoped.
2023-01-08 20:23:30,010 - restApi - INFO - app stoped.
2023-01-09 09:22:25,946 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 09:22:25,946 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 13:48:18,396 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 13:48:18,396 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 13:48:18,397 - cluster - INFO - predict start
2023-01-09 13:48:18,399 - cluster - INFO - request params: <bottle.FormsDict object at 0x117368700>
2023-01-09 13:48:18,399 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 13:48:18,410 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 13:48:19,199 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 13:48:19,199 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:48:19,219 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 13:48:19,219 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 13:48:19,219 - cluster - INFO - clean data set ...
2023-01-09 13:48:19,785 - restApi - INFO - text_df: 
2023-01-09 13:48:19,785 - restApi - INFO - text_df: 
2023-01-09 13:48:19,786 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:48:19,786 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:48:19,808 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 13:48:19,808 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 13:48:19,818 - restApi - INFO - 这是在干嘛1235
2023-01-09 13:48:19,818 - restApi - INFO - 这是在干嘛1235
2023-01-09 13:48:19,821 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:48:19,821 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:48:19,827 - cluster - INFO - train data set ...
2023-01-09 13:48:19,830 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:48:19,830 - cluster - INFO - k: 2
2023-01-09 13:48:19,859 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 13:48:19,859 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 13:48:19,867 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 20, in predict
    @bottle.post()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 90, in train
    def train(data):
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 96, in bestModel
    def bestModel(data):
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 13:48:19,867 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 20, in predict
    @bottle.post()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 90, in train
    def train(data):
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 96, in bestModel
    def bestModel(data):
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 13:49:03,751 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 13:49:03,751 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 13:49:03,757 - cluster - INFO - predict start
2023-01-09 13:49:03,761 - cluster - INFO - request params: <bottle.FormsDict object at 0x16dc07b20>
2023-01-09 13:49:03,763 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 13:49:04,343 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 13:49:05,610 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 13:49:05,612 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:49:06,006 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 13:49:06,008 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 13:49:06,010 - cluster - INFO - clean data set ...
2023-01-09 13:49:06,451 - restApi - INFO - text_df: 
2023-01-09 13:49:06,451 - restApi - INFO - text_df: 
2023-01-09 13:49:06,455 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:49:06,455 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:49:07,296 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 13:49:07,296 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 13:49:08,491 - restApi - INFO - 这是在干嘛1235
2023-01-09 13:49:08,491 - restApi - INFO - 这是在干嘛1235
2023-01-09 13:49:08,578 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:49:08,578 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:49:09,313 - cluster - INFO - train data set ...
2023-01-09 13:49:09,452 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:49:09,454 - cluster - INFO - k: 2
2023-01-09 13:53:17,571 - restApi - INFO - app stoped.
2023-01-09 13:53:17,571 - restApi - INFO - app stoped.
2023-01-09 13:53:26,609 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 13:53:26,609 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 13:53:36,648 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 13:53:36,648 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 13:53:36,657 - cluster - INFO - predict start
2023-01-09 13:53:36,674 - cluster - INFO - request params: <bottle.FormsDict object at 0x28e38e940>
2023-01-09 13:53:36,676 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 13:53:37,262 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 13:53:38,763 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 13:53:38,766 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:53:39,180 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 13:53:39,182 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 13:53:39,184 - cluster - INFO - clean data set ...
2023-01-09 13:53:40,392 - restApi - INFO - text_df: 
2023-01-09 13:53:40,392 - restApi - INFO - text_df: 
2023-01-09 13:53:40,395 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:53:40,395 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:53:41,219 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 13:53:41,219 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 13:53:42,415 - restApi - INFO - 这是在干嘛1235
2023-01-09 13:53:42,415 - restApi - INFO - 这是在干嘛1235
2023-01-09 13:53:42,502 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:53:42,502 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:53:43,238 - cluster - INFO - train data set ...
2023-01-09 13:53:43,377 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:53:43,379 - cluster - INFO - k: 2
2023-01-09 13:54:05,987 - restApi - INFO - app stoped.
2023-01-09 13:54:05,987 - restApi - INFO - app stoped.
2023-01-09 13:54:12,329 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 13:54:12,329 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 13:54:24,678 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 13:54:24,678 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 13:54:24,680 - cluster - INFO - predict start
2023-01-09 13:54:24,681 - cluster - INFO - request params: <bottle.FormsDict object at 0x14ea66790>
2023-01-09 13:54:24,681 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 13:54:24,690 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 13:54:25,738 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 13:54:25,739 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:54:25,747 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 13:54:25,747 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 13:54:25,747 - cluster - INFO - clean data set ...
2023-01-09 13:54:27,014 - restApi - INFO - text_df: 
2023-01-09 13:54:27,014 - restApi - INFO - text_df: 
2023-01-09 13:54:27,014 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:54:27,014 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 13:54:27,031 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 13:54:27,031 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 13:54:27,051 - restApi - INFO - 这是在干嘛1235
2023-01-09 13:54:27,051 - restApi - INFO - 这是在干嘛1235
2023-01-09 13:54:27,053 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:54:27,053 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:54:27,067 - cluster - INFO - train data set ...
2023-01-09 13:54:27,071 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 13:54:27,072 - cluster - INFO - k: 2
2023-01-09 13:55:09,754 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 13:55:09,754 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 13:55:09,756 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 13:55:09,756 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 14:04:07,978 - restApi - INFO - app stoped.
2023-01-09 14:04:07,978 - restApi - INFO - app stoped.
2023-01-09 14:04:09,571 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:04:09,571 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:04:23,797 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:04:23,797 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:04:23,802 - cluster - INFO - predict start
2023-01-09 14:04:23,804 - cluster - INFO - request params: <bottle.FormsDict object at 0x1412ee7c0>
2023-01-09 14:04:23,804 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 14:04:23,825 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 14:04:24,439 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 14:04:24,439 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:04:24,462 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 14:04:24,463 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 14:04:24,463 - cluster - INFO - clean data set ...
2023-01-09 14:04:24,832 - restApi - INFO - text_df: 
2023-01-09 14:04:24,832 - restApi - INFO - text_df: 
2023-01-09 14:04:24,833 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:04:24,833 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:04:24,861 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:04:24,861 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:04:24,879 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:04:24,879 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:04:24,882 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:04:24,882 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:04:24,896 - cluster - INFO - train data set ...
2023-01-09 14:04:24,899 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:04:24,900 - cluster - INFO - k: 2
2023-01-09 14:04:43,757 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 14:04:43,757 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 14:04:43,761 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 14:04:43,761 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 14:05:10,805 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:05:10,805 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:05:10,806 - cluster - INFO - predict start
2023-01-09 14:05:10,806 - cluster - INFO - request params: <bottle.FormsDict object at 0x1412ee850>
2023-01-09 14:05:10,806 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 14:05:10,816 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 14:05:11,354 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 14:05:11,355 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:05:11,382 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 14:05:11,382 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 14:05:11,382 - cluster - INFO - clean data set ...
2023-01-09 14:05:11,797 - restApi - INFO - text_df: 
2023-01-09 14:05:11,797 - restApi - INFO - text_df: 
2023-01-09 14:05:11,797 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:05:11,797 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:05:11,824 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:05:11,824 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:05:11,843 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:05:11,843 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:05:11,846 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:05:11,846 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:05:11,860 - cluster - INFO - train data set ...
2023-01-09 14:05:11,863 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:05:11,863 - cluster - INFO - k: 2
2023-01-09 14:07:06,283 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 14:07:06,283 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 14:07:06,285 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 14:07:06,285 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 59, in predict
    clf, k = train(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 91, in train
    clf, k = bestModel(data)
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 104, in bestModel
    clf.fit(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1455, in fit
    self._check_mkl_vcomp(X, X.shape[0])
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 911, in _check_mkl_vcomp
    modules = threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 162, in threadpool_info
    return threadpoolctl.threadpool_info()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 124, in threadpool_info
    return _ThreadpoolInfo(user_api=_ALL_USER_APIS).todicts()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 14:13:09,306 - restApi - INFO - app stoped.
2023-01-09 14:13:09,306 - restApi - INFO - app stoped.
2023-01-09 14:13:11,001 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:13:11,001 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:13:58,696 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:13:58,696 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:13:58,698 - cluster - INFO - predict start
2023-01-09 14:13:58,698 - cluster - INFO - request params: <bottle.FormsDict object at 0x16c468790>
2023-01-09 14:13:58,698 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 14:13:58,708 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 14:13:59,442 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 14:13:59,443 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:13:59,464 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 14:13:59,464 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 14:13:59,464 - cluster - INFO - clean data set ...
2023-01-09 14:14:00,075 - restApi - INFO - text_df: 
2023-01-09 14:14:00,075 - restApi - INFO - text_df: 
2023-01-09 14:14:00,075 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:14:00,075 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:14:00,103 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:14:00,103 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:14:00,123 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:14:00,123 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:14:00,126 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:14:00,126 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:14:00,139 - cluster - INFO - train data set ...
2023-01-09 14:14:00,144 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:14:00,144 - cluster - INFO - k: 2
2023-01-09 14:14:26,075 - cluster - INFO - k: 3
2023-01-09 14:14:26,971 - cluster - INFO - k: 4
2023-01-09 14:14:31,974 - cluster - INFO - train ok, predict itself ...
2023-01-09 14:14:31,988 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 14:14:31,988 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 14:14:31,990 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 14:14:31,990 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 14:21:10,414 - restApi - INFO - app stoped.
2023-01-09 14:21:10,414 - restApi - INFO - app stoped.
2023-01-09 14:21:12,104 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:21:12,104 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:21:22,035 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:21:22,035 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:21:22,036 - cluster - INFO - predict start
2023-01-09 14:21:22,037 - cluster - INFO - request params: <bottle.FormsDict object at 0x284b4f7c0>
2023-01-09 14:21:22,037 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 14:21:22,047 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 14:21:22,494 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 14:21:22,495 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:21:22,503 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 14:21:22,503 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 14:21:22,503 - cluster - INFO - clean data set ...
2023-01-09 14:21:22,916 - restApi - INFO - text_df: 
2023-01-09 14:21:22,916 - restApi - INFO - text_df: 
2023-01-09 14:21:22,916 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:21:22,916 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:21:22,933 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:21:22,933 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:21:22,952 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:21:22,952 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:21:22,955 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:21:22,955 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:21:22,969 - cluster - INFO - train data set ...
2023-01-09 14:21:22,973 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:21:22,973 - cluster - INFO - k: 2
2023-01-09 14:21:22,991 - cluster - INFO - k: 3
2023-01-09 14:21:23,010 - cluster - INFO - k: 4
2023-01-09 14:21:44,934 - cluster - INFO - train ok, predict itself ...
2023-01-09 14:22:00,481 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 14:22:00,481 - restApi - ERROR - 'NoneType' object has no attribute 'split'
2023-01-09 14:22:00,484 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 14:22:00,484 - restApi - ERROR - Traceback (most recent call last):
  File "/Users/lengxu/Documents/python/restApi/restApi.py", line 38, in predict
    return cluster.predict()
  File "/Users/lengxu/Documents/python/restApi/cluster.py", line 67, in predict
    pred = clf.predict(data)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 1061, in predict
    labels = _labels_inertia_threadpool_limit(
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/cluster/_kmeans.py", line 812, in _labels_inertia_threadpool_limit
    with threadpool_limits(limits=1, user_api="blas"):
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/sklearn/utils/fixes.py", line 151, in threadpool_limits
    return threadpoolctl.threadpool_limits(limits=limits, user_api=user_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 171, in __init__
    self._original_info = self._set_threadpool_limits()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 268, in _set_threadpool_limits
    modules = _ThreadpoolInfo(prefixes=self._prefixes,
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 340, in __init__
    self._load_modules()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 371, in _load_modules
    self._find_modules_with_dyld()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 428, in _find_modules_with_dyld
    self._make_module_from_path(filepath)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 515, in _make_module_from_path
    module = module_class(filepath, prefix, user_api, internal_api)
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 606, in __init__
    self.version = self.get_version()
  File "/Users/lengxu/Documents/python/projects/restApi/lib/python3.9/site-packages/threadpoolctl.py", line 646, in get_version
    config = get_config().split()
AttributeError: 'NoneType' object has no attribute 'split'

2023-01-09 14:40:01,616 - restApi - INFO - app stoped.
2023-01-09 14:40:01,616 - restApi - INFO - app stoped.
2023-01-09 14:40:03,161 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:40:03,161 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:40:08,150 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:40:08,150 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:40:08,152 - cluster - INFO - predict start
2023-01-09 14:40:08,153 - cluster - INFO - request params: <bottle.FormsDict object at 0x157ba54f0>
2023-01-09 14:40:08,153 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 14:40:08,163 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 14:40:09,220 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 14:40:09,221 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:40:09,248 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 14:40:09,248 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 14:40:09,248 - cluster - INFO - clean data set ...
2023-01-09 14:40:09,802 - restApi - INFO - text_df: 
2023-01-09 14:40:09,802 - restApi - INFO - text_df: 
2023-01-09 14:40:09,803 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:40:09,803 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:40:09,832 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:40:09,832 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:40:09,852 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:40:09,852 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:40:09,855 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:40:09,855 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:40:09,869 - cluster - INFO - train data set ...
2023-01-09 14:40:09,872 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:40:09,872 - cluster - INFO - k: 2
2023-01-09 14:40:09,901 - cluster - INFO - k: 3
2023-01-09 14:40:09,925 - cluster - INFO - k: 4
2023-01-09 14:40:16,429 - cluster - INFO - train ok, predict itself ...
2023-01-09 14:40:16,460 - cluster - INFO - pred = [1 0 1 0 3 0 0 1 0 1 1 0 0 0 0 2 3 0 0 1 0 0 1 0 1 0 0 3 2 1 2 0 0 2 1 3 0
 1 0 1 2 0 3 2 2 3 1 1 2 2 3 2 3 2 2 1 0]
2023-01-09 14:40:30,635 - cluster - INFO -    客户年龄段
1      2
3      2
5      2
6      2
8      2
11     2
12     2
13     2
14     2
17     2
18     2
20     2
21     2
23     2
25     2
26     2
31     2
32     2
36     2
38     2
41     2
56     2
2023-01-09 14:40:30,642 - cluster - INFO - 客户年龄段    object
dtype: object
2023-01-09 14:40:30,647 - cluster - INFO - keyItem  中老年   1.0
2023-01-09 14:40:30,647 - cluster - INFO - name 客户年龄段 : 中老年 : 100.0%,
2023-01-09 14:40:30,647 - cluster - INFO - keyItem  青年   0.0
2023-01-09 14:40:30,647 - cluster - INFO - keyItem  中年   0.0
2023-01-09 14:40:30,652 - cluster - INFO - Empty DataFrame
Columns: []
Index: [1, 3, 5, 6, 8, 11, 12, 13, 14, 17, 18, 20, 21, 23, 25, 26, 31, 32, 36, 38, 41, 56]
2023-01-09 14:40:30,667 - cluster - INFO -    客户年龄段
0      0
2      0
7      0
9      0
10     0
19     0
22     0
24     0
29     0
34     0
37     0
39     0
46     0
47     0
55     0
2023-01-09 14:40:30,674 - cluster - INFO - 客户年龄段    object
dtype: object
2023-01-09 14:40:30,677 - cluster - INFO - keyItem  青年   1.0
2023-01-09 14:40:30,677 - cluster - INFO - name 客户年龄段 : 青年 : 100.0%,
2023-01-09 14:40:30,677 - cluster - INFO - keyItem  中年   0.0
2023-01-09 14:40:30,678 - cluster - INFO - keyItem  中老年   0.0
2023-01-09 14:40:30,682 - cluster - INFO - Empty DataFrame
Columns: []
Index: [0, 2, 7, 9, 10, 19, 22, 24, 29, 34, 37, 39, 46, 47, 55]
2023-01-09 14:40:30,696 - cluster - INFO -    客户年龄段
15     1
28     1
30     1
33     1
40     1
43     1
44     1
48     1
49     1
51     1
53     1
54     1
2023-01-09 14:40:30,703 - cluster - INFO - 客户年龄段    object
dtype: object
2023-01-09 14:40:30,706 - cluster - INFO - keyItem  中年   1.0
2023-01-09 14:40:30,706 - cluster - INFO - name 客户年龄段 : 中年 : 100.0%,
2023-01-09 14:40:30,707 - cluster - INFO - keyItem  青年   0.0
2023-01-09 14:40:30,707 - cluster - INFO - keyItem  中老年   0.0
2023-01-09 14:40:30,712 - cluster - INFO - Empty DataFrame
Columns: []
Index: [15, 28, 30, 33, 40, 43, 44, 48, 49, 51, 53, 54]
2023-01-09 14:40:30,726 - cluster - INFO -    客户年龄段
4      3
16     3
27     3
35     3
42     3
45     3
50     3
52     3
2023-01-09 14:40:30,731 - cluster - INFO - 客户年龄段    object
dtype: object
2023-01-09 14:40:30,735 - cluster - INFO - keyItem  老年   1.0
2023-01-09 14:40:30,735 - cluster - INFO - name 客户年龄段 : 老年 : 100.0%,
2023-01-09 14:40:30,735 - cluster - INFO - keyItem  青年   0.0
2023-01-09 14:40:30,735 - cluster - INFO - keyItem  中年   0.0
2023-01-09 14:40:30,740 - cluster - INFO - Empty DataFrame
Columns: []
Index: [4, 16, 27, 35, 42, 45, 50, 52]
2023-01-09 14:40:30,744 - cluster - INFO - result={"data": [[{"name": "客户年龄段 : 中老年 : 100.0%", "level": 1.0, "count": 22, "en_name": "age_group", "key_number": "2", "status": 0, "value": 1.0}], [{"name": "客户年龄段 : 青年 : 100.0%", "level": 1.0, "count": 15, "en_name": "age_group", "key_number": "0", "status": 0, "value": 1.0}], [{"name": "客户年龄段 : 中年 : 100.0%", "level": 1.0, "count": 12, "en_name": "age_group", "key_number": "1", "status": 0, "value": 1.0}], [{"name": "客户年龄段 : 老年 : 100.0%", "level": 1.0, "count": 8, "en_name": "age_group", "key_number": "3", "status": 0, "value": 1.0}]], "error_no": "0", "error_info": "success"}
2023-01-09 14:42:05,202 - restApi - INFO - app stoped.
2023-01-09 14:42:05,202 - restApi - INFO - app stoped.
2023-01-09 14:42:06,804 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:42:06,804 - restApi - INFO - starting app with config {"master_name": "mymaster", "redis_host": "10.20.35.85", "redis_port": "6379", "redis_password": "dmpIwin@123", "es_https_status": 0, "es_sniff_on_start": true, "es_user": "elastic", "es_password": "hundsun@123", "es_hosts": ["10.20.32.118:9400"], "es_timeout": 36000, "es_index": "group_tag_all_gy", "page_size": 5000, "n_components": 10, "service_host": "localhost", "service_port": 8087, "log_file": "./ml.log", "key_field_name": "fund_account"}...
2023-01-09 14:42:11,741 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:42:11,741 - restApi - INFO - calling cluster.predict()111 ...
2023-01-09 14:42:11,742 - cluster - INFO - predict start
2023-01-09 14:42:11,742 - cluster - INFO - request params: <bottle.FormsDict object at 0x14ac2a310>
2023-01-09 14:42:11,742 - cluster - INFO - params: dict_values([{'columns': ['[{"c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"é\x9d\x92å¹´","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadå¹´","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"ä¸\xadè\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"è\x80\x81å¹´","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"å®¢æ\x88·å¹´é¾\x84æ®µ","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}]'], 'group_id': ['4536'], 'sql_str': ['{"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}}']}])
2023-01-09 14:42:11,752 - cluster - INFO - convert english columns[{"c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","dicts":[{"c_dict_entry":"1000000001","c_dict_prompt":"青年","c_dict_type":"0","c_sub_entry":"0","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中年","c_dict_type":"0","c_sub_entry":"1","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"中老年","c_dict_type":"0","c_sub_entry":"2","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"},{"c_dict_entry":"1000000001","c_dict_prompt":"老年","c_dict_type":"0","c_sub_entry":"3","c_tag_category_id":"10010310601180000002","c_tag_category_name":"客户年龄段","c_tag_english_name":"age_group","c_tag_unit":"/"}],"tag_status":0}] => chinese columns{'age_group': '客户年龄段'}
2023-01-09 14:42:12,369 - cluster - INFO - get es data {"query":{"bool":{"should":[{"bool":{"must":[{"regexp":{"mobile_tel.keyword":{"value":".*13.*","flags_value":65535,"max_determinized_states":10000,"boost":1}}}],"adjust_pure_negative":true,"boost":1}}],"adjust_pure_negative":true,"boost":1}},"_source":{"includes":["age_group"],"excludes":[]}} => 57 records
2023-01-09 14:42:12,369 - cluster - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:42:12,393 - cluster - INFO - convert english columns Index(['age_group'], dtype='object')
2023-01-09 14:42:12,394 - cluster - INFO - to chinese columns ['客户年龄段']
2023-01-09 14:42:12,394 - cluster - INFO - clean data set ...
2023-01-09 14:42:12,988 - restApi - INFO - text_df: 
2023-01-09 14:42:12,988 - restApi - INFO - text_df: 
2023-01-09 14:42:12,989 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:42:12,989 - restApi - INFO -    age_group
0          0
1          2
2          0
3          2
4          3
5          2
6          2
7          0
8          2
9          0
10         0
11         2
12         2
13         2
14         2
15         1
16         3
17         2
18         2
19         0
20         2
21         2
22         0
23         2
24         0
25         2
26         2
27         3
28         1
29         0
30         1
31         2
32         2
33         1
34         0
35         3
36         2
37         0
38         2
39         0
40         1
41         2
42         3
43         1
44         1
45         3
46         0
47         0
48         1
49         1
50         3
51         1
52         3
53         1
54         1
55         0
56         2
2023-01-09 14:42:13,008 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:42:13,008 - restApi - INFO -     age_group
0         0.0
1         2.0
2         0.0
3         2.0
4         3.0
5         2.0
6         2.0
7         0.0
8         2.0
9         0.0
10        0.0
11        2.0
12        2.0
13        2.0
14        2.0
15        1.0
16        3.0
17        2.0
18        2.0
19        0.0
20        2.0
21        2.0
22        0.0
23        2.0
24        0.0
25        2.0
26        2.0
27        3.0
28        1.0
29        0.0
30        1.0
31        2.0
32        2.0
33        1.0
34        0.0
35        3.0
36        2.0
37        0.0
38        2.0
39        0.0
40        1.0
41        2.0
42        3.0
43        1.0
44        1.0
45        3.0
46        0.0
47        0.0
48        1.0
49        1.0
50        3.0
51        1.0
52        3.0
53        1.0
54        1.0
55        0.0
56        2.0
2023-01-09 14:42:13,028 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:42:13,028 - restApi - INFO - 这是在干嘛1235
2023-01-09 14:42:13,031 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:42:13,031 - restApi - INFO -     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:42:13,045 - cluster - INFO - train data set ...
2023-01-09 14:42:13,049 - cluster - INFO - data:     age_group
0   -1.371182
1    0.582752
2   -1.371182
3    0.582752
4    1.559720
5    0.582752
6    0.582752
7   -1.371182
8    0.582752
9   -1.371182
10  -1.371182
11   0.582752
12   0.582752
13   0.582752
14   0.582752
15  -0.394215
16   1.559720
17   0.582752
18   0.582752
19  -1.371182
20   0.582752
21   0.582752
22  -1.371182
23   0.582752
24  -1.371182
25   0.582752
26   0.582752
27   1.559720
28  -0.394215
29  -1.371182
30  -0.394215
31   0.582752
32   0.582752
33  -0.394215
34  -1.371182
35   1.559720
36   0.582752
37  -1.371182
38   0.582752
39  -1.371182
40  -0.394215
41   0.582752
42   1.559720
43  -0.394215
44  -0.394215
45   1.559720
46  -1.371182
47  -1.371182
48  -0.394215
49  -0.394215
50   1.559720
51  -0.394215
52   1.559720
53  -0.394215
54  -0.394215
55  -1.371182
56   0.582752
2023-01-09 14:42:13,049 - cluster - INFO - k: 2
2023-01-09 14:42:13,067 - cluster - INFO - k: 3
2023-01-09 14:42:13,084 - cluster - INFO - k: 4
2023-01-09 14:42:13,100 - cluster - INFO - k: 5
2023-01-09 14:42:13,122 - cluster - INFO - k: 6
2023-01-09 14:42:13,143 - cluster - INFO - k: 7
2023-01-09 14:42:13,166 - cluster - INFO - k: 8
2023-01-09 14:42:13,188 - cluster - INFO - k: 9
2023-01-09 14:42:13,212 - cluster - INFO - k: 10
2023-01-09 14:42:13,239 - cluster - INFO - train ok, predict itself ...
2023-01-09 14:42:13,268 - cluster - INFO - pred = [1 0 1 0 3 0 0 1 0 1 1 0 0 0 0 2 3 0 0 1 0 0 1 0 1 0 0 3 2 1 2 0 0 2 1 3 0
 1 0 1 2 0 3 2 2 3 1 1 2 2 3 2 3 2 2 1 0]
2023-01-09 14:42:13,279 - cluster - INFO -    客户年龄段
1      2
3      2
5      2
6      2
8      2
11     2
12     2
13     2
14     2
17     2
18     2
20     2
21     2
23     2
25     2
26     2
31     2
32     2
36     2
38     2
41     2
56     2
2023-01-09 14:42:13,286 - cluster - INFO - 客户年龄段    object
dtype: object
2023-01-09 14:42:13,291 - cluster - INFO - keyItem  中老年   1.0
2023-01-09 14:42:13,291 - cluster - INFO - name 客户年龄段 : 中老年 : 100.0%,
2023-01-09 14:42:13,291 - cluster - INFO - keyItem  青年   0.0
2023-01-09 14:42:13,291 - cluster - INFO - keyItem  中年   0.0
2023-01-09 14:42:13,296 - cluster - INFO - Empty DataFrame
Columns: []
Index: [1, 3, 5, 6, 8, 11, 12, 13, 14, 17, 18, 20, 21, 23, 25, 26, 31, 32, 36, 38, 41, 56]
2023-01-09 14:42:13,310 - cluster - INFO -    客户年龄段
0      0
2      0
7      0
9      0
10     0
19     0
22     0
24     0
29     0
34     0
37     0
39     0
46     0
47     0
55     0
2023-01-09 14:42:13,316 - cluster - INFO - 客户年龄段    object
dtype: object
2023-01-09 14:42:13,320 - cluster - INFO - keyItem  青年   1.0
2023-01-09 14:42:13,320 - cluster - INFO - name 客户年龄段 : 青年 : 100.0%,
2023-01-09 14:42:13,320 - cluster - INFO - keyItem  中年   0.0
2023-01-09 14:42:13,320 - cluster - INFO - keyItem  中老年   0.0
2023-01-09 14:42:13,326 - cluster - INFO - Empty DataFrame
Columns: []
Index: [0, 2, 7, 9, 10, 19, 22, 24, 29, 34, 37, 39, 46, 47, 55]
2023-01-09 14:42:13,339 - cluster - INFO -    客户年龄段
15     1
28     1
30     1
33     1
40     1
43     1
44     1
48     1
49     1
51     1
53     1
54     1
2023-01-09 14:42:13,345 - cluster - INFO - 客户年龄段    object
dtype: object
2023-01-09 14:42:13,349 - cluster - INFO - keyItem  中年   1.0
2023-01-09 14:42:13,349 - cluster - INFO - name 客户年龄段 : 中年 : 100.0%,
2023-01-09 14:42:13,349 - cluster - INFO - keyItem  青年   0.0
2023-01-09 14:42:13,349 - cluster - INFO - keyItem  中老年   0.0
2023-01-09 14:42:13,354 - cluster - INFO - Empty DataFrame
Columns: []
Index: [15, 28, 30, 33, 40, 43, 44, 48, 49, 51, 53, 54]
2023-01-09 14:42:13,368 - cluster - INFO -    客户年龄段
4      3
16     3
27     3
35     3
42     3
45     3
50     3
52     3
2023-01-09 14:42:13,374 - cluster - INFO - 客户年龄段    object
dtype: object
2023-01-09 14:42:13,377 - cluster - INFO - keyItem  老年   1.0
2023-01-09 14:42:13,377 - cluster - INFO - name 客户年龄段 : 老年 : 100.0%,
2023-01-09 14:42:13,377 - cluster - INFO - keyItem  青年   0.0
2023-01-09 14:42:13,378 - cluster - INFO - keyItem  中年   0.0
2023-01-09 14:42:13,383 - cluster - INFO - Empty DataFrame
Columns: []
Index: [4, 16, 27, 35, 42, 45, 50, 52]
2023-01-09 14:42:13,387 - cluster - INFO - result={"data": [[{"name": "客户年龄段 : 中老年 : 100.0%", "level": 1.0, "count": 22, "en_name": "age_group", "key_number": "2", "status": 0, "value": 1.0}], [{"name": "客户年龄段 : 青年 : 100.0%", "level": 1.0, "count": 15, "en_name": "age_group", "key_number": "0", "status": 0, "value": 1.0}], [{"name": "客户年龄段 : 中年 : 100.0%", "level": 1.0, "count": 12, "en_name": "age_group", "key_number": "1", "status": 0, "value": 1.0}], [{"name": "客户年龄段 : 老年 : 100.0%", "level": 1.0, "count": 8, "en_name": "age_group", "key_number": "3", "status": 0, "value": 1.0}]], "error_no": "0", "error_info": "success"}
2023-01-09 14:43:23,056 - restApi - INFO - app stoped.
2023-01-09 14:43:23,056 - restApi - INFO - app stoped.
